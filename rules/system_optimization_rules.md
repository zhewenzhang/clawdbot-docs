# 📋 Clawdbot 系统优化规则与执行方案 (V1.0)

## 1. 核心原则
*   **目标导向**：所有优化以降低 Token 消耗、提升响应速度为核心目标。
*   **数据驱动**：基于实际 Token 消耗数据进行分析和决策。
*   **持续迭代**：每日小步快跑，每周复盘，每月总结。
*   **文档驱动**：所有规则、优化方案、结果都存档，形成知识库。

## 2. 规则分类体系

| 规则类别 | 优化方向 | 示例规则 |
| :--- | :--- | :--- |
| **A. 上下文管理** | 优化上下文加载和清理 | - 任务结束自动清理无关上下文<br>- 长期项目采用文件化记忆<br>- **[新增] 日切策略**：每日凌晨 3:00 归档昨日上下文并重置会话，仅保留摘要。 |
| **B. 任务分类** | 根据任务类型选择策略 | - 快速查询：Zero-Shot 模式<br>- 深度分析：RAG 模式<br>- 系统管理：精准模式 |
| **C. 模型选择** | 根据任务复杂度选择模型 | - 简单任务：轻量模型<br>- 复杂任务：强推理模型 |
| **D. 提示词工程** | 优化指令表达方式 | - 使用更精确的指令<br>- 采用 Chain-of-Thought 思维链 |
| **E. 工具使用** | 优先使用工具替代大模型 | - 网页搜索替代知识回忆<br>- 文件处理工具替代文本生成 |
| **F. 沟通规范** | 保持回复清晰直接 | - 避免在回复中包含历史上下文引用<br>- 只提供实际的执行结果或分析<br>- 保持回复的清晰和直接 |

## 3. 优化执行流程

### 每日优化流程 (23:00)
1.  **数据采集**：读取今日 Token 消耗日志 (`memory/token_stats.json`)。
2.  **模式分析**：识别高消耗任务类型和原因。
3.  **提出优化点**：基于规则库，提出 1-3 个具体优化建议。
4.  **生成报告**：输出优化报告，包含预期效果。
5.  **规则更新**：根据优化结果，更新规则库。
6.  **存档日志**：将优化过程和结果存入日志。

### 周度复盘 (每周日)
1.  汇总本周优化效果。
2.  识别趋势和问题。
3.  调整下周优化重点。

### 月度总结 (每月底)
1.  全面评估优化成果。
2.  更新主规则文档。
2.  生成月度优化白皮书。

## 4. 日志格式规范

每次优化都会生成一个日志文件，格式如下：

```
# 📊 优化日志: YYYY-MM-DD

## 🎯 优化方向
- [ ] 降低上下文消耗
- [ ] 优化任务分类策略

## 🔧 优化点
1.  问题：[具体问题描述]
2.  原因：[消耗高的原因分析]
3.  方案：[具体优化方案]

## 📈 预期结果
- Token 节省：约 XX%
- 响应速度：提升 XX%

## 📊 实际结果
- Token 节省：XX% (实际值)
- 响应速度：XXms (实际值)

## 📝 更新内容
- [ ] 规则更新：[具体更新内容]
- [ ] 文档更新：[具体更新内容]
```

## 5. 执行计划

### 第一阶段：规则建立 (已完成)
- [x] 建立规则文档
- [x] 建立日志系统
- [ ] 设置定时任务

### 第二阶段：自动化执行 (下一步)
- [ ] 编写优化程序
- [ ] 设置每日 23:00 Cron 任务
- [ ] 首次运行并生成初始报告

---

**规则版本**: 1.0<br>
**创建日期**: 2026-01-31<br>
**最后更新**: 2026-01-31