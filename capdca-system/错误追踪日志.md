# 错误追踪日志系统

> 版本: v1.0 | 创建日期: 2026-02-04 | 状态: 活跃

## 1. 错误分类体系

### 1.1 错误大类

| 错误类型 | 代码前缀 | 描述 | 示例 |
|---------|---------|-----|-----|
| 文件操作错误 | F- | 文件读写、移动、删除错误 | 文件不存在、权限不足 |
| 命令执行错误 | C- | Shell命令执行失败 | 命令超时、权限拒绝 |
| 任务规划错误 | P- | 任务分解、计划错误 | 遗漏步骤、时间估算错误 |
| Skills使用错误 | S- | Skill调用、匹配错误 | 使用错误Skill、未调用Skill |
| 沟通错误 | M- | 消息发送、格式错误 | 格式错误、发送失败 |
| 系统配置错误 | G- | AGENTS.md、系统配置错误 | 规则冲突、配置缺失 |
| 性能问题 | R- | 响应慢、资源占用高 | 内存泄漏、CPU过高 |
| 逻辑错误 | L- | 推理、判断错误 | 错误假设、逻辑漏洞 |

### 1.2 错误级别

| 级别 | 代码 | 影响 | 处理时限 | 示例 |
|-----|------|-----|---------|-----|
| P0-紧急 | CRITICAL | 系统不可用 | 立即处理 | 服务崩溃 |
| P1-高 | HIGH | 功能受损 | <1小时 | 核心功能失效 |
| P2-中 | MEDIUM | 功能受限 | <4小时 | 非核心功能问题 |
| P3-低 | LOW | 轻微问题 | <24小时 | 体验问题 |

### 1.3 错误状态

| 状态 | 定义 | 允许转换 |
|-----|-----|---------|
| 新建 | 错误已记录 | → 分析中 |
| 分析中 | 正在进行根因分析 | → 已识别 |
| 已识别 | 根因已确定 | → 解决中 |
| 解决中 | 正在实施解决方案 | → 已解决 |
| 已解决 | 方案已实施 | → 验证中 |
| 验证中 | 正在验证解决方案 | → 已关闭 |
| 已关闭 | 问题已解决并验证 | - |

---

## 2. 根因分析模板

### 2.1 5-Why分析法

```markdown
## 5-Why分析 [错误编号]

**错误描述**：______

**Why 1**: 为什么会发生这个错误？
- **原因**：______
- **证据**：______

**Why 2**: 为什么这个原因存在？
- **原因**：______
- **证据**：______

**Why 3**: 为什么这个深层原因存在？
- **原因**：______
- **证据**：______

**Why 4**: 为什么这个根本原因存在？
- **原因**：______
- **证据**：______

**Why 5**: 为什么这个根本原因存在？
- **原因**：______
- **证据**：______

**根本原因**：______

**验证方法**：______
```

### 2.2 鱼骨图分析

```
问题陈述：______

         人                     机器
         ↓                      ↓
    ┌─────────┐           ┌─────────┐
    │ 人员因素 │           │ 设备因素 │
    └────┬────┘           └────┬────┘
         │                     │
    ┌─────────┐           ┌─────────┐
    │ 方法因素 │           │ 材料因素 │
    └────┬────┘           └────┬────┘
         │                     │
    ┌─────────┐           ┌─────────┐
    │ 环境因素 │           │ 管理因素 │
    └─────────┘           └─────────┘
         ↑                     ↑
         └─────────────────────┘
              ↓
        问题发生点
```

### 2.3 错误模式识别

```markdown
## 错误模式识别

### 重复错误列表
| 日期 | 错误编号 | 错误类型 | 描述 | 重复次数 |
|-----|---------|---------|-----|---------|
| ______ | ______ | ______ | ______ | __ |

### 模式分析
**模式1**: ______
- 出现次数：__
- 涉及错误：______
- 根本原因：______
- 预防措施：______

**模式2**: ______
- 出现次数：__
- 涉及错误：______
- 根本原因：______
- 预防措施：______
```

---

## 3. 解决方案模板

### 3.1 即时解决方案

```markdown
## 即时解决方案 [错误编号]

**错误**：______
**状态**：已识别 → 解决中

### 临时修复
**操作**：______
**执行人**：______
**执行时间**：______
**验证方法**：______

### 验证结果
- [ ] 修复成功
- [ ] 问题复发
- [ ] 产生新问题

**后续操作**：______
```

### 3.2 根本解决方案

```markdown
## 根本解决方案 [错误编号]

**错误**：______
**根本原因**：______（来自5-Why分析）

### 解决方案设计
**方案描述**：______
**方案类型**：预防/修复/优化
**影响范围**：______
**实施风险**：______

### 实施计划
1. **步骤1**：______
   - 负责人：______
   - 截止日期：______
   - 验收标准：______

2. **步骤2**：______
   - 负责人：______
   - 截止日期：______
   - 验收标准：______

### 验证计划
**验证方法**：______
**验证时间**：______
**验证人**：______
**成功标准**：______

### 实施状态
- [ ] 计划阶段
- [ ] 执行阶段
- [ ] 验证阶段
- [ ] 完成阶段
```

---

## 4. 预防措施

### 4.1 预防措施清单

```markdown
## 预防措施清单

### 错误编号关联
- 关联错误：______
- 关联任务：______

### 预防措施
| 序号 | 措施 | 类型 | 负责人 | 实施日期 | 状态 |
|-----|-----|-----|-------|---------|-----|
| 1 | ______ | 流程/规则/工具 | ______ | ______ | 待/进/完 |

### 实施详情
**措施1**：______
- **描述**：______
- **预期效果**：______
- **验证方法**：______

**措施2**：______
- **描述**：______
- **预期效果**：______
- **验证方法**：______
```

### 4.2 规则更新

```markdown
## 规则更新 [预防措施编号]

**更新类型**：
- [ ] AGENTS.md规则更新
- [ ] TOOLS.md配置更新
- [ ] Skills流程更新
- [ ] 文档更新

**更新内容**：
```markdown
// 更新前
______

// 更新后
______
```

**更新理由**：______
**影响评估**：______
**验证方法**：______
```

### 4.3 知识库补充

```markdown
## 知识库补充 [条目编号]

**标题**：______
**分类**：______
**关键词**：______

**问题描述**：
______

**解决方案**：
______

**注意事项**：
______

**相关资源**：
- ______
- ______
```

---

## 5. 错误日志记录

### 5.1 错误日志模板

```markdown
## 错误日志 [YYYY-MM-DD]

### 错误汇总
| 编号 | 类型 | 级别 | 描述 | 状态 |
|-----|------|-----|-----|-----|
| E-___ | ______ | ______ | ______ | ______ |

### 错误详情

#### 错误 [E-___]
**发现时间**：______
**发现方式**：自动检测/人工发现/用户报告
**任务关联**：______
**影响范围**：______

**错误信息**：
```
______
```

**复现步骤**：
1. ______
2. ______
3. ______

**当前状态**：______

**分析记录**：
- 5-Why分析：[链接或附件]
- 根本原因：______

**解决方案**：
- 即时修复：______
- 根本方案：______

**预防措施**：______

**关闭日期**：______
**关闭人**：______
```

### 5.2 错误统计

```markdown
## 错误统计 [月份: 2026-02]

### 总体统计
| 指标 | 数值 | 环比变化 |
|-----|-----|---------|
| 总错误数 | __ | ↑/__% |
| 已关闭 | __ | ↑/__% |
| 待处理 | __ | ↑/__% |
| 平均解决时间 | __小时 | ↑/__% |

### 类型分布
| 错误类型 | 数量 | 占比 | 关闭率 |
|---------|-----|-----|-------|
| F-文件操作 | __ | __% | __% |
| C-命令执行 | __ | __% | __% |
| P-任务规划 | __ | __% | __% |
| S-Skills使用 | __ | __% | __% |
| M-沟通错误 | __ | __% | __% |
| G-系统配置 | __ | __% | __% |
| R-性能问题 | __ | __% | __% |
| L-逻辑错误 | __ | __% | __% |

### 级别分布
| 级别 | 数量 | 占比 | 平均解决时间 |
|-----|-----|-----|------------|
| P0-紧急 | __ | __% | __小时 |
| P1-高 | __ | __% | __小时 |
| P2-中 | __ | __% | __小时 |
| P3-低 | __ | __% | __小时 |

### 趋势分析
- 趋势1：______
- 趋势2：______
- 预警：______
```

---

## 6. 集成到CAPDCA

### 6.1 错误处理流程（CAPDCA视角）

```
C - Check:  错误检测和分类
A - Analyze: 根因分析（5-Why/鱼骨图）
P - Plan:   解决方案规划
D - Do:     方案实施
C - Check:  解决方案验证
A - Adjust: 预防措施和规则更新
```

### 6.2 错误触发CAPDCA

```markdown
## 错误触发的CAPDCA循环

### C - Check（错误检测）
**触发条件**：错误发生或被发现
**检查内容**：
- 错误分类（类型、级别）
- 影响范围评估
- 紧急程度判断

### A - Analyze（错误分析）
**触发条件**：Check阶段完成
**分析内容**：
- 5-Why根因分析
- 错误模式识别
- 历史错误检索

### P - Plan（解决方案）
**触发条件**：分析阶段完成
**计划内容**：
- 即时修复方案
- 根本解决方案
- 预防措施

### D - Do（实施）
**触发条件**：计划阶段完成
**实施内容**：
- 错误修复
- 规则更新
- 知识库补充

### C - Check（验证）
**触发条件**：实施阶段完成
**验证内容**：
- 修复验证
- 预防验证
- 影响验证

### A - Adjust（优化）
**触发条件**：验证阶段完成
**调整内容**：
- 流程优化
- 规则更新
- 预防机制完善
```

---

## 7. 附录

### 7.1 错误代码速查

| 代码 | 类型 | 典型原因 | 快速处理 |
|-----|------|---------|---------|
| F-001 | 文件不存在 | 路径错误 | 检查路径 |
| F-002 | 权限不足 | 权限设置 | 检查权限 |
| C-001 | 命令超时 | 资源不足 | 增加超时 |
| C-002 | 权限拒绝 | 权限问题 | 检查权限 |
| P-001 | 遗漏步骤 | 分析不充分 | 回顾检查 |
| S-001 | Skill不匹配 | 任务识别错误 | 重读任务 |
| M-001 | 格式错误 | 规则不清 | 参考模板 |
| G-001 | 规则冲突 | 配置错误 | 检查配置 |

### 7.2 文件路径

- 错误日志: capdca-system/error-log.md
- 错误统计: capdca-system/error-statistics.md
- 根因分析: capdca-system/root-cause-analysis.md
- 预防措施: capdca-system/prevention-measures.md
- 知识库: knowledge-base/
