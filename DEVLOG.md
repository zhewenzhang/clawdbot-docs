# DEVLOG.md - 开发日志与Bug追踪

**创建时间**: 2026-02-04  
**目的**: 记录开发过程中的问题、调试过程和迭代，防止重复错误

---

## 📋 使用说明

### 记录原则

1. **发现问题立即记录** - 不要等到解决后才记录
2. **记录根本原因** - 不仅记录现象，更要记录原因
3. **记录预防措施** - 如何避免再次发生
4. **标记解决状态** - 已解决/进行中/待处理

### 记录格式

```markdown
## [日期] 问题标题

**状态**: ✅ 已解决 | 🔄 进行中 | ⏳ 待处理

**问题描述**：
- 简述问题

**环境信息**：
- 系统/版本/配置

**问题现象**：
- 详细描述出现的现象

**根本原因**：
- 分析导致问题的根本原因

**解决过程**：
1. 尝试的方案1（失败原因）
2. 尝试的方案2（失败原因）
3. 最终方案（成功）

**解决方案**：
- 详细的解决步骤

**预防措施**：
- 如何避免再次发生

**相关文件/链接**：
- 相关文件路径
- 参考链接

**经验教训**：
- 学到的经验
```

---

## 🚀 快速参考

### 常用标签

| 标签 | 含义 |
|-----|------|
| ✅ | 已解决 |
| 🔄 | 进行中 |
| ⏳ | 待处理 |
| ⚠️ | 重要Bug |
| 💡 | 解决方案 |
| 📝 | 文档更新 |

### 快速查找

- 搜索 `[状态]` 查找对应状态的问题
- 搜索 `[标签]` 查找特定类型的问题
- 搜索关键词快速定位

---

## 📝 开发记录

### 2026-02-04

#### ✅ 晶圆芯片切割计算器 - GitHub Actions 部署超时

**状态**: 已解决

**问题描述**：
- 使用 `gh run list` 命令检查部署状态时，命令一直卡住超时

**环境信息**：
- macOS, GitHub CLI, OpenClaw

**问题现象**：
- 命令执行后没有任何输出
- 等待超过30秒后超时

**根本原因**：
- GitHub CLI 在某些网络环境下响应缓慢
- 命令需要持续的网络连接

**解决过程**：
1. 尝试等待命令完成 → 超时
2. 尝试增加超时时间 → 仍然超时
3. 改用网页查看部署状态 → 成功

**解决方案**：
- 对于长时间运行的命令，使用后台执行
- 必要时直接访问GitHub网页查看状态
- 不要在需要快速响应的场景中依赖CLI

**预防措施**：
- 重要操作（如部署）直接在网页完成
- CLI命令设置合理的超时时间
- 准备备用方案

**相关文件/链接**：
- `/Users/dave/clawd/wafer-calculator/`

**经验教训**：
- CLI在某些环境下可能不稳定
- 网页界面更可靠

---

#### ⚠️ Cron任务格式问题 - Markdown表格在Telegram显示混乱

**状态**: 已解决

**问题描述**：
- cron任务输出的Markdown表格在Telegram中显示格式错误

**环境信息**：
- OpenClaw, Telegram, cron任务

**问题现象**：
- Markdown表格被截断
- 格式错乱，难以阅读
- 用户反馈"不好阅读"

**根本原因**：
- cron任务prompt中包含了Markdown表格格式
- Telegram不支持Markdown表格渲染
- 输出直接发送到Telegram导致格式错误

**解决过程**：
1. 识别所有包含Markdown格式的cron任务
2. 修改prompt，明确禁止Markdown表格
3. 统一使用纯文字列表格式

**解决方案**：
修改以下5个cron任务：
- Daily Token Report
- 每日金价查询汇报
- Nightly Tasks - Full Suite
- Daily Context Cutover
- Daily System Optimization

统一格式模板：
```
【格式要求】
- 禁止使用 Markdown 表格
- 使用纯文字列表格式
```

**预防措施**：
- 所有发送到Telegram的内容都应避免Markdown表格
- 创建cron任务时明确规定输出格式
- 定期检查现有任务的输出格式

**相关文件/链接**：
- `/Users/dave/clawd/memory/cron_tasks_format_analysis.md`
- `/Users/dave/clawd/output/cron_tasks_fix_summary.txt`

**经验教训**：
- Markdown在某些平台显示效果不同
- 重要输出应使用纯文字或HTML
- 及时响应用户反馈并修复

---

## 📈 统计信息

| 统计项 | 数值 |
|-------|------|
| 总记录数 | 2 |
| 已解决 | 2 |
| 进行中 | 0 |
| 待处理 | 0 |
| 重要Bug | 1 |

---

## 🔍 搜索索引

### 按标签搜索

**✅ 已解决问题**
- 晶圆芯片切割计算器 - GitHub Actions 部署超时
- Cron任务格式问题 - Markdown表格在Telegram显示混乱

**⚠️ 重要Bug**
- Cron任务格式问题 - Markdown表格在Telegram显示混乱

---

## 📌 待处理事项

暂无待处理事项

---

## 💡 最佳实践

### 1. 记录时机
- 发现问题时立即记录
- 不要等到"有空"再记录
- 问题解决后补充完整信息

### 2. 记录深度
- 记录"是什么"，更要记录"为什么"
- 记录"怎么解决"，更要记录"如何预防"
- 记录"尝试了什么"，更要记录"为什么失败"

### 3. 维护频率
- 每周回顾一次DEVLOG
- 每月总结一次常见问题
- 每季度优化记录格式

### 4. 分享机制
- 重要经验分享给团队
- 定期回顾避免重复踩坑
- 将教训融入开发流程

---

## 📚 相关资源

- 项目文档: `memory/`
- 规则库: `rules/`
- 日志: `logs/`
- 问题追踪: DEVLOG.md (本文档)

---

**最后更新**: 2026-02-04  
**版本**: v1.0
